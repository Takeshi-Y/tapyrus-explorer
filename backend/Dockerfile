FROM node:14.13.1-stretch

ENV CONF_DIR='/app/configurations'

ENV TAPYRUSD_RPC_HOST=TAPYRUSD_RPC_HOST
ENV TAPYRUSD_RPC_PORT=TAPYRUSD_RPC_PORT
ENV TAPYRUSD_RPC_USER=TAPYRUSD_RPC_USER
ENV TAPYRUSD_RPC_PASSWORD=TAPYRUSD_RPC_PASSWORD

ENV ELECTRS_RPC_HOST=ELECTRS_RPC_HOST
ENV ELECTRS_RPC_PORT=ELECTRS_RPC_PORT

WORKDIR /app
COPY . .

RUN npm install && \
    mkdir $CONF_DIR

EXPOSE 3001

ENTRYPOINT ["./entrypoint.sh"]
CMD ["npm", "start"]


